20:00:05	 От Егор Сизов : Слышно
20:00:26	 От Антон Антипин : +
20:00:32	 От Dmitry Dvornikov : +
20:00:47	 От Каменной Илья : +
20:00:52	 От Online Education : Спасибо за ОС
20:01:01	 От Dmitry Ananyev : +
20:01:02	 От Лепилов Антон : +
20:01:04	 От Егор Сизов : +
20:01:05	 От Elena Mezentseva : +
20:02:12	 От Егор Сизов : База данных?
20:02:20	 От Dmitry Dvornikov : таблица
20:02:22	 От Каменной Илья : таблица
20:05:23	 От Online Education : https://www.pvsm.ru/razrabotka/358374?ysclid=lcd73iurdm899890487
20:08:46	 От Каменной Илья : +
20:08:46	 От Антон Антипин : +
20:08:46	 От Сергей Сунцов : +
20:08:49	 От Егор Сизов : +
20:08:49	 От Dmitry Dvornikov : +
20:08:50	 От Каменной Илья : не пропадали
20:08:51	 От Elena Mezentseva : +
20:16:17	 От Егор Сизов : В новой схеме
20:16:21	 От Каменной Илья : +
20:16:38	 От Каменной Илья : можно указывать схему явно)
20:19:55	 От Dmitry Dvornikov : Почему _4 а не скажем _5 или _2
20:21:14	 От Dmitry Dvornikov : да...
20:22:52	 От Каменной Илья : можно указать через , кучу схем?\
20:23:01	 От Каменной Илья : в search_path ?
20:23:12	 От Каменной Илья : s1,s2,s3,public ?
20:23:41	 От Каменной Илья : строка 67
20:24:05	 От Каменной Илья : а если схем 10 шт?
20:24:10	 От Каменной Илья : могу указать каждую ?
20:24:19	 От Каменной Илья : через запятую в определенном порядке
20:24:51	 От Антон Антипин : можно вроде. Там очередность откуда только указать и все...
20:25:07	 От Каменной Илья : ок
20:25:54	 От Антон Антипин : А почему в другой схеме нельзя?
20:25:59	 От Каменной Илья : это из-за schema_path как раз похоже
20:26:08	 От Каменной Илья : * search_path
20:26:42	 От Антон Антипин : sh1.table1   можно добавить sh2.table1
20:26:56	 От Каменной Илья : т.е. похоже что schema_search определяет - в какой схеме по умолчанию создает таблицу, если не задать схему явно. а вероятно не связано с create schema
20:27:00	 От Антон Антипин : У вас ошибка была типа table exist
20:27:52	 От Dmitry Dvornikov : из-за search_path не поменялась схема при создании, и он пытался создать в схеме где уже есть таблица
20:28:20	 От Каменной Илья : + теперь все стало понятно. эксперимент всему голова)
20:29:31	 От Каменной Илья : это уже прошло
20:29:57	 От Каменной Илья : когда пробовали создать таблицу сразу после создания схемы sch1 - не получилось
20:29:58	 От Каменной Илья : +
20:29:59	 От Dmitry Dvornikov : +
20:30:07	 От Алексей Прохваткин : +
20:31:35	 От Егор Сизов : authorization по умолчанию присвоится пользователю сессии, если явно не казать?
20:31:35	 От Антон Антипин : -
20:31:54	 От Сергей Сунцов : а если удалить схему, что будет с таблицей?
20:35:39	 От Антон Антипин : Djn b gjkexbkb jndtn
20:35:46	 От Антон Антипин : Вот и получили ответ)))
20:37:32	 От Dmitry Abramov : Это работает, только с системными командами ? или с функциями  и процедурами тоже ?
20:37:43	 От Каменной Илья : тоже
20:37:58	 От Каменной Илья : ну или я не понял вопрос
20:38:41	 От Dmitry Abramov : Так, если в базе есть хранимые процедуры, или функции . Можно ли их глянуть подобным образом ?
20:38:49	 От Каменной Илья : можно сделать select из pg_catalog - там будет таблица с кодом функций к примеру или view
20:40:33	 От Каменной Илья : ответ https://stackoverflow.com/questions/1347282/how-can-i-get-a-list-of-all-functions-stored-in-the-database-of-a-particular-sch
20:41:16	 От Каменной Илья : вроде бы - ROLE и USER это синонимы сейчас
20:44:12	 От Сергей Сунцов : а как student попал в dvdrental? таких прав не давали же
20:44:36	 От Сергей Сунцов : +
20:45:07	 От Каменной Илья : можно создать роль с возможностью делать grant role role1 to role2alter role role1; (под ролью role)что то такое …(revoke role role1 from role2 если отнять)Удобно настроить права для базовой роли.. - чтобы не настраивать каждую к примеру.
20:47:05	 От Каменной Илья : тут вроде стоит отменить, что нужен пакет postgres-contrib - чтобы был postgres_fdw- ньанс - быстрее работать через unix socket - т.е. без задания host,port ...
20:47:05	 От Dmitry Dvornikov : А про server и extension в постгрес можно по подробнее
20:47:48	 От Егор Сизов : Server этосущность в расширении postgres_fdw
20:48:10	 От Егор Сизов : Удаленная база
20:49:16	 От Dmitry Dvornikov : Егор, спасибо понял
20:49:19	 От Каменной Илья : ( тут удобно использовать import foreign schema - более можно, можно не задавать таблицы или колонки - если хотим всю схему импортнуть )
20:49:20	 От Антон Антипин : Что за сущность SERVER
20:49:22	 От Егор Сизов : Там еще можно подтянуть схему таблицы
20:49:34	 От Егор Сизов : Не перечисляя столбцы и их типы
20:50:18	 От Константин Максимов : мапинг не создался
20:50:30	 От Константин Максимов : после дропа не было ;
20:51:11	 От Антон Антипин : я понял...это от расширения
20:52:07	 От Каменной Илья : можно открыть еще 1 таб  в терминале. удобно - что не придется ходить туда сюда...
20:52:42	 От Dmitry Dvornikov : дроп перед этим не отработал 59 строка
20:53:17	 От Сергей Сунцов : это создается копия удаленной таблицы? или как? или снапшот какой-то?
20:53:36	 От Каменной Илья : это не копия, подключение
20:53:36	 От Егор Сизов : Нет, просто запрос идет к базе
20:54:26	 От Каменной Илья : т.е. это запускается по сути еще одно подключение по заданным данным … т.к. одновременно активно 2 подключение - явно - наш Psqlи неявно в фоне - fdw
20:54:29	 От Егор Сизов : Также как view не хранит данные, только запрос не к таблице в пределах базы, а ко внешней базе
20:54:44	 От Сергей Сунцов : ага, понятно. спасибо
20:56:11	 От Каменной Илья : -
20:56:13	 От Лепилов Антон : -
20:56:13	 От Dmitry Dvornikov : нет
20:56:14	 От Dmitry Abramov : -
20:56:16	 От Сергей Сунцов : а options для чего?
20:56:18	 От Elena Mezentseva : -
20:56:19	 От Егор Сизов : Но в документации написано, что оптимизация запросов должна быть лучше, чем в dblink
20:56:23	 От Сергей Сунцов : tcnm erfpfyf c[tvf/nf,kbwf
20:56:26	 От Сергей Сунцов : блин
20:56:32	 От Сергей Сунцов : если указана схема.таблица
20:56:37	 От Егор Сизов : Но не было возможности сравнить на опыте
20:56:58	 От Каменной Илья : или сервера - для подлюченияили user_mapping - тоже опшионс
20:57:13	 От Сергей Сунцов : ну мы в CREATE указали схема.таблица
20:57:18	 От Сергей Сунцов : потом то же самое в options
20:57:45	 От Антон Антипин : А расширение создает эти с точки зрения постгреса - pg_gloabal?
20:57:51	 От Каменной Илья : да
20:58:06	 От Сергей Сунцов : да, понятно
20:58:22	 От Каменной Илья : можно по умолчанию зайти в pg_catalg.pg_foreign … и посмотреть и server и маппинги
20:58:34	 От Антон Антипин : create ext_server это же явно таблица которая где то висит
20:58:47	 От Антон Антипин : или другая сущность?
20:59:10	 От Антон Антипин : Ну данные то он хранит гдето
20:59:40	 От Антон Антипин : понятно спасибо
20:59:46	 От Константин Максимов : Я возможно пропустил. Зачем хождение из одной БД в другую в принципе может понадобится? Агрегация данных?
20:59:54	 От Сергей Сунцов : +
20:59:55	 От Лепилов Антон : +
20:59:56	 От Dmitry Dvornikov : +
20:59:57	 От Антон Антипин : +
20:59:57	 От Алексей Прохваткин : +
20:59:57	 От Elena Mezentseva : +
20:59:59	 От Dmitry Abramov : +
21:01:02	 От Каменной Илья : Костантин:"Зачем хождение из одной БД в другую в принципе может понадобится?"физически данные могут быть разных приложений на разных серверах или базах - явно не связанных . А тут можно подключать любые внешние сущности
21:01:47	 От Каменной Илья : зачем - это вопрос к архитектуру
21:01:50	 От Каменной Илья : это вопрос был выше
21:01:57	 От Каменной Илья : вы пропустили
21:02:23	 От Константин Максимов : спасибо
21:02:50	 От Dmitry Dvornikov : Зачастую данные приходиться брать из баз сторонних проектов, т.к. они не всегда имеют соответствующее апи для доступа
21:02:55	 От Каменной Илья : (через unix socker очень даже производительно работает. но там надо специально настроить pg_hda )
21:03:47	 От Каменной Илья : - не удаленным - на том же хосте  - unix socket
21:04:16	 От Каменной Илья : но так я согласен - оно менее шустро, чем обычный select
21:04:19	 От Каменной Илья : +
21:04:58	 От Каменной Илья : +
21:05:37	 От Сергей Сунцов : а есть группы для пользователей?
21:05:50	 От Каменной Илья : role - это и группы и пользователи
21:06:08	 От Каменной Илья : был слайд - где grant role - надо было внимательнее смотреть
21:06:11	 От Антон Антипин : Права на строки в таблице еще не создали?
21:06:20	 От Каменной Илья : даже не проходили это еще
21:06:57	 От Dmitry Dvornikov : таблеспэйсами
21:07:16	 От Сергей Сунцов : ну тогда не очень понятно, как несколько пользователей наследуют права роли(группы)
21:07:34	 От Каменной Илья : нет. через set role - можно временно себе выставить как бы роль
21:07:47	 От Каменной Илья : show current_user, session_user - разница
21:08:29	 От Сергей Сунцов : ну да
21:08:37	 От Каменной Илья : т.е. можно перед командами выставить нужную роль
21:09:08	 От Антон Антипин : +
21:09:10	 От Dmitry Dvornikov : +
21:09:12	 От Алексей Прохваткин : +
21:09:13	 От Каменной Илья : разве можно одновременно работать в нескольких ролях?
21:09:13	 От Сергей Сунцов : +
21:09:51	 От Каменной Илья : https://www.postgresql.org/docs/current/sql-set-role.htmlя про это
21:10:17	 От Антон Антипин : смерживаются права
21:10:20	 От Каменной Илья : но он же должен это включить через set role ?
21:10:37	 От Каменной Илья : ... хм. не знал что смерживаются. не проверял
21:12:11	 От Каменной Илья : там аналогично и по других схемам - если доступ есть к pg_catalog
21:12:25	 От Dmitry Abramov : +
21:12:26	 От Егор Сизов : +
21:12:27	 От Elena Mezentseva : +
21:12:28	 От Каменной Илья : там всегда можно посмотреть список таблица
21:12:28	 От Антон Антипин : +
21:12:32	 От Dmitry Ananyev : +
21:12:35	 От Каменной Илья : через pg_catalog
21:12:45	 От Каменной Илья : не важно public или нет
21:13:02	 От Каменной Илья : pg_tables
21:13:14	 От Каменной Илья : енр
21:13:15	 От Каменной Илья : нет
21:13:19	 От Каменной Илья : .pg_tables
21:13:21	 От Каменной Илья : да
21:13:37	 От Антон Антипин : )))
21:13:48	 От Антон Антипин : и вся защита коту под хвост
21:14:04	 От Каменной Илья : ну ... только схему увидет, но не select
21:14:21	 От Каменной Илья : или можно revoke select к таким то объектам pg_catalog .. в теории
21:15:03	 От Каменной Илья : usage - по умолчанию на Public вроде - с этим согласен
21:17:23	 От Егор Сизов : Не гибко...
21:17:52	 От Каменной Илья : норм. права на объекта тоже можно смотреть через таблицу в pg_catalog  т.е. доступны всем в базе по умолчанию
21:18:15	 От Егор Сизов : Нигде нельзя указать в CREATE TABLE, чтобы таблица создалась с грантами из схемы?
21:18:23	 От Каменной Илья : нельзя...
21:18:49	 От Каменной Илья : но можно задать owner
21:21:40	 От Ivan Lobov : Хрень какая то, зачем так сделано? 
Чтобы никто не смог разобраться?
21:21:48	 От Егор Сизов : Права проверяются в момент запроса? Если сессия не завершена, а права уже отобрали, то пока сессия не закроется доступ остается?
21:22:33	 От Сергей Сунцов : не понятно, как это вобще работает (
21:23:00	 От Каменной Илья : ручками самостоятельно попробовать - и разобраться можно
21:23:01	 От Антон Антипин : Разработчики postgres тоже не понимают как это работает
21:23:05	 От Лепилов Антон : права на схему отдельно, права на табличку отдельно, от прав схемы к правам таблички
21:23:26	 От Лепилов Антон : голову сломаешь
21:23:30	 От Каменной Илья : ... так логично. права на схему - это как папка права на таблицы - это как права на файлы
21:23:58	 От Каменной Илья : схема - право использования и право создания своих таблицы - это разные вещи
21:24:09	 От Антон Антипин : Не сделали в постгресе еще права на строки?. Или расширение какое есть Типа User1.table1 (3 rows)  2 row user1  , 1 row user 2. И когда (User2)Select * -выводит одну строку, а User1 - 2 строки
21:24:18	 От Ivan Lobov : А ну если рассматривать схемы как папки, тогда логика есть
21:24:19	 От Каменной Илья : для таблиц  - select, updage,insert, trigger, refernce вроде
21:24:28	 От Каменной Илья : мы не дошли до прав до строк
21:24:30	 От Dmitry Dvornikov : Этот прикол с любой схемой или только со схемой public?
21:25:34	 От Ivan Lobov : Тоесть если дать права на другую схему, то мы сможем делать селектор в ее таблицах?
21:25:51	 От Каменной Илья : нет.
21:25:59	 От Каменной Илья : если на таблицы не дали права в той схеме
21:26:12	 От Сергей Сунцов : т.е. действует для всех схем
21:26:16	 От Сергей Сунцов : не только для паблика
21:26:41	 От Каменной Илья : ну да. но для public права по умолчанию могут выдаваться ... а на другие схемы скорее нет
21:29:54	 От Dmitry Ananyev : Это деление по 3-м привилегиям чем определяется?
21:31:21	 От Каменной Илья : грубо также с файламиу владельца файла - полный доступу администратора - полный доступ ко всем практическиу пользователя - явно заданные права. все логичноА базу данных - условно как сетевой диск представь - право коннекта есть или нет
21:31:25	 От Dmitry Ananyev : +
21:31:32	 От Каменной Илья : нет вопросов
21:33:13	 От Dmitry Abramov : Привилегия GRANT OPTION; включает в себя  GRANT ADMIN ?
21:33:21	 От Каменной Илья : нет. это разное
21:33:35	 От Каменной Илья : admin - это для управление ролью - кто входит
21:33:43	 От Каменной Илья : grant - Это дать права к объектам
21:33:53	 От Каменной Илья : (таблицам, view, процедурам, т.д.)
21:34:31	 От Каменной Илья : хорошо что читал доки)
21:34:48	 От Антон Антипин : Ну более менее...
21:34:51	 От Dmitry Dvornikov : згидшс
21:34:55	 От Dmitry Dvornikov : public
21:35:01	 От Алексей Прохваткин : С public и cascade нужно быть акуратнее)
21:35:20	 От Dmitry Dvornikov : -
21:35:24	 От Антон Антипин : в практике редко такое...поэтому и тяжко идет
21:35:26	 От Антон Антипин : спасибо
21:35:46	 От Ivan Lobov : Да надеюсь в дз будет закрепление
21:36:07	 От Антон Антипин : ДЗ. напишите на assembler нормальную систему ролей)))))
21:36:23	 От Каменной Илья : она нормальная... вроде
21:36:29	 От Ivan Lobov : Лгбт роли какието
21:36:39	 От Антон Антипин : Да нормальные...привыкнуть и все ок
21:36:40	 От Каменной Илья : unix права на файлы - тоже самое почти
21:36:42	 От Егор Сизов : В целом, можно на любом PostgreSQL дз делать? В 15 ничего не должно было сильно поменяться?
21:37:46	 От Антон Антипин : +
21:37:48	 От Dmitry Dvornikov : +
21:37:49	 От Лепилов Антон : +
21:37:49	 От Егор Сизов : +
21:37:49	 От Ivan Lobov : +
21:37:49	 От Сергей Сунцов : +
21:37:50	 От Dmitry Abramov : +
21:37:50	 От Константин Максимов : +
21:37:51	 От Elena Mezentseva : +
21:37:51	 От Алексей Прохваткин : +
21:37:52	 От Сергей Сунцов : спасибо!
21:37:53	 От Каменной Илья : +
21:37:57	 От Dmitry Ananyev : +
